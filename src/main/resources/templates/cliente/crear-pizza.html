<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Armar pizza — PizzUM & BurgUM</title>

    <link rel="stylesheet" href="../../static/css/base.css" th:href="@{/css/base.css}">
    <link rel="stylesheet" href="../../static/css/creaciones.css" th:href="@{/css/creaciones.css}">
</head>
<body>

<header>
    <div class="container nav">
        <div class="nav__brand">
            <img class="logo" alt="PizzUM & BurgUM" src="https://i.postimg.cc/qMLhFSwz/Logo-final-removebg-preview.png">
            <strong>PizzUM &amp; BurgUM</strong>
        </div>
        <nav class="nav__links">
            <a class="pill" href="inicio-cliente.html" th:href="@{/static}">Menú</a>
            <a class="pill" href="pedido.html" th:href="@{/templates/pedido}">Pedido</a>
        </nav>
    </div>
</header>

<main class="container builder">
    <section class="media">
        <img class="photo" alt="Pizza" src="https://images.unsplash.com/photo-1571407970349-bc81e7e96d47?q=80&w=1600&auto=format&fit=crop">
        <span class="badge">Pizza de ejemplo</span>
    </section>

    <section class="card">
        <h1 class="title">Armá tu pizza</h1>
        <p class="lead">Elegí tamaño, masa, salsa, queso y toppings. Podés sumar papas/bebida.</p>

        <form id="pizzaForm">
            <div class="group">
                <h3>Tamaño (uno)</h3>
                <div class="options">
                    <div class="opt"><input type="radio" name="tamano" id="pz-s" value="Chica" checked><label for="pz-s">Chica</label></div>
                    <div class="opt"><input type="radio" name="tamano" id="pz-m" value="Mediana"><label for="pz-m">Mediana</label></div>
                    <div class="opt"><input type="radio" name="tamano" id="pz-l" value="Grande"><label for="pz-l">Grande</label></div>
                </div>
            </div>

            <div class="group">
                <h3>Masa (uno)</h3>
                <div class="options">
                    <div class="opt"><input type="radio" name="masa" id="ms-napo" value="Napolitana" checked><label for="ms-napo">Napolitana</label></div>
                    <div class="opt"><input type="radio" name="masa" id="ms-int" value="Integral"><label for="ms-int">Integral</label></div>
                    <div class="opt"><input type="radio" name="masa" id="ms-sg" value="Sin gluten"><label for="ms-sg">Sin gluten</label></div>
                </div>
            </div>

            <div class="group">
                <h3>Salsa (uno)</h3>
                <div class="options">
                    <div class="opt"><input type="radio" name="salsa" id="sl-t" value="Tomate" checked><label for="sl-t">Tomate</label></div>
                    <div class="opt"><input type="radio" name="salsa" id="sl-p" value="Pomodoro"><label for="sl-p">Pomodoro</label></div>
                </div>
            </div>

            <div class="group">
                <h3>Queso (uno)</h3>
                <div class="options">
                    <div class="opt"><input type="radio" name="queso" id="qs-m" value="Muzza" checked><label for="qs-m">Muzza</label></div>
                    <div class="opt"><input type="radio" name="queso" id="qs-r" value="Roquefort"><label for="qs-r">Roquefort</label></div>
                    <div class="opt"><input type="radio" name="queso" id="qs-o" value="Otro"><label for="qs-o">Otro</label></div>
                </div>
                <p class="note">El queso es un paso aparte en pizza.</p>
            </div>

            <div class="group">
                <h3>Toppings (múltiples)</h3>
                <div class="options">
                    <div class="opt"><input type="checkbox" id="tp-jamon"     value="Jamón"><label for="tp-jamon">Jamón</label></div>
                    <div class="opt"><input type="checkbox" id="tp-morron"    value="Morrón"><label for="tp-morron">Morrón</label></div>
                    <div class="opt"><input type="checkbox" id="tp-aceitunas" value="Aceitunas"><label for="tp-aceitunas">Aceitunas</label></div>
                    <div class="opt"><input type="checkbox" id="tp-oregano"   value="Orégano"><label for="tp-oregano">Orégano</label></div>
                </div>
            </div>

            <div class="group">
                <h3>Acompañamientos (opcionales)</h3>
                <div class="options">
                    <div class="opt"><input type="checkbox" id="ac-papas"  value="Papas"><label for="ac-papas">Papas</label></div>
                    <div class="opt"><input type="checkbox" id="ac-bebida" value="Bebida"><label for="ac-bebida">Bebida</label></div>
                </div>
            </div>

            <div class="actions">
                <button type="button" id="favBtn" class="fav-toggle"><span class="heart"></span> Favorito</button>
                <button type="button" id="addBtn" class="btn btn--primary">Agregar al pedido</button>
                <a class="btn btn--ghost" href="inicio-cliente.html" th:href="@{/static}">Volver al menú</a>
                <a class="btn btn--ghost" href="pedido.html" th:href="@{/templates/pedido}">Ir al pedido</a>
            </div>
        </form>

        <div class="summary">
            <strong>Resumen rápido</strong>
            <div class="row" id="quickTags"></div>
        </div>
    </section>
</main>

<script>
    (function(){
      const form = document.getElementById('pizzaForm');
      const quickTags = document.getElementById('quickTags');
      const favBtn = document.getElementById('favBtn');
      const addBtn = document.getElementById('addBtn');

      let isFav = false;
      favBtn.addEventListener('click', () => {
        isFav = !isFav;
        favBtn.classList.toggle('active', isFav);
      });

      function readSelections(){
        const checks = Array.from(form.querySelectorAll('input[type=checkbox]:checked')).map(c=>c.value);
        return {
          tipo: 'Pizza',
          tamano: form.tamano.value,
          masa: form.masa.value,
          salsa: form.salsa.value,
          queso: form.queso.value,
          toppings: checks.filter(v=>['Jamón','Morrón','Aceitunas','Orégano'].includes(v)),
          acomp:    checks.filter(v=>['Papas','Bebida'].includes(v)),
          favorito: isFav
        };
      }
      function renderTags(){
        const d = readSelections();
        const parts = [ d.tamano, d.masa, d.salsa, d.queso,
          ...d.toppings.map(x=>'Top: '+x), ...d.acomp.map(x=>'Ac: '+x) ];
        quickTags.innerHTML = parts.map(t => '<span class="tag">'+t+'</span>').join('');
      }
      form.addEventListener('change', renderTags);
      renderTags();

      addBtn.addEventListener('click', () => {
        const d = readSelections();
        const cart = JSON.parse(localStorage.getItem('cart')||'[]');
        cart.push(d);
        localStorage.setItem('cart', JSON.stringify(cart));
        if(d.favorito){
          const favs = JSON.parse(localStorage.getItem('favorites')||'[]');
          favs.push(d);
          localStorage.setItem('favorites', JSON.stringify(favs));
        }
        alert('Pizza agregada al pedido.');
      });
    })();
</script>
</body>
</html>
