<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Armar burger — PizzUM & BurgUM</title>

  <link rel="stylesheet" href="../../static/css/base.css" th:href="@{/css/base.css}">
  <link rel="stylesheet" href="../../static/css/creaciones.css" th:href="@{/css/creaciones.css}">
</head>
<body>

<header>
  <div class="container nav">
    <div class="nav__brand">
      <img class="logo" alt="PizzUM & BurgUM" src="https://i.postimg.cc/qMLhFSwz/Logo-final-removebg-preview.png">
      <strong>PizzUM &amp; BurgUM</strong>
    </div>
    <nav class="nav__links">
      <a class="pill" href="paginaPrincipalCliente.html" th:href="@{/static}">Menú</a>
      <a class="pill" href="pedido.html" th:href="@{/templates/pedido}">Pedido</a>
    </nav>
  </div>
</header>

<main class="container builder">
  <section class="media">
    <img class="photo" alt="Burger" src="https://images.unsplash.com/photo-1550547660-d9450f859349?q=80&w=1600&auto=format&fit=crop">
    <span class="badge">Burger de ejemplo</span>
  </section>

  <section class="card">
    <h1 class="title">Armá tu burger</h1>
    <p class="lead">Elegí pan, proteína, cantidad (máx. 3), queso y extras. Podés sumar papas/bebida.</p>

    <form id="burgerForm">
      <div class="group">
        <h3>Pan (uno)</h3>
        <div class="options">
          <div class="opt"><input type="radio" name="pan" id="pn-papa" value="Pan de papa" checked><label for="pn-papa">Pan de papa</label></div>
          <div class="opt"><input type="radio" name="pan" id="pn-int" value="Integral"><label for="pn-int">Integral</label></div>
          <div class="opt"><input type="radio" name="pan" id="pn-sg" value="Sin gluten"><label for="pn-sg">Sin gluten</label></div>
        </div>
      </div>

      <div class="group">
        <h3>Proteína (uno) + Cantidad de carnes (1 a 3)</h3>
        <div class="options">
          <div class="opt"><input type="radio" name="proteina" id="pr-vaca" value="Vaca" checked><label for="pr-vaca">Vaca</label></div>
          <div class="opt"><input type="radio" name="proteina" id="pr-pollo" value="Pollo"><label for="pr-pollo">Pollo</label></div>
          <div class="opt"><input type="radio" name="proteina" id="pr-cerdo" value="Cerdo"><label for="pr-cerdo">Cerdo</label></div>
          <div class="opt"><input type="radio" name="proteina" id="pr-soja" value="Soja"><label for="pr-soja">Soja</label></div>
          <div class="opt"><input type="radio" name="proteina" id="pr-lentejas" value="Lentejas"><label for="pr-lentejas">Lentejas</label></div>
        </div>
        <div class="options" style="margin-top:10px">
          <div class="opt"><input type="radio" name="cant" id="c1" value="1" checked><label for="c1">1 carne</label></div>
          <div class="opt"><input type="radio" name="cant" id="c2" value="2"><label for="c2">2 carnes</label></div>
          <div class="opt"><input type="radio" name="cant" id="c3" value="3"><label for="c3">3 carnes</label></div>
        </div>
      </div>

      <div class="group">
        <h3>Queso (uno)</h3>
        <div class="options">
          <div class="opt"><input type="radio" name="queso" id="qb-ched" value="Cheddar" checked><label for="qb-ched">Cheddar</label></div>
          <div class="opt"><input type="radio" name="queso" id="qb-mozz" value="Muzzarella"><label for="qb-mozz">Muzzarella</label></div>
          <div class="opt"><input type="radio" name="queso" id="qb-sin" value="Sin queso"><label for="qb-sin">Sin queso</label></div>
        </div>
      </div>

      <div class="group">
        <h3>Extras (múltiples)</h3>
        <div class="options">
          <div class="opt"><input type="checkbox" id="ex-bacon" value="Bacon"><label for="ex-bacon">Bacon</label></div>
          <div class="opt"><input type="checkbox" id="ex-tomate" value="Tomate"><label for="ex-tomate">Tomate</label></div>
          <div class="opt"><input type="checkbox" id="ex-lechuga" value="Lechuga"><label for="ex-lechuga">Lechuga</label></div>
          <div class="opt"><input type="checkbox" id="ex-cebolla" value="Cebolla"><label for="ex-cebolla">Cebolla</label></div>
          <div class="opt"><input type="checkbox" id="ex-pepino" value="Pepinillos"><label for="ex-pepino">Pepinillos</label></div>
        </div>
      </div>

      <div class="group">
        <h3>Acompañamientos (opcionales)</h3>
        <div class="options">
          <div class="opt"><input type="checkbox" id="ac-papas" value="Papas"><label for="ac-papas">Papas</label></div>
          <div class="opt"><input type="checkbox" id="ac-bebida" value="Bebida"><label for="ac-bebida">Bebida</label></div>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="favBtn" class="fav-toggle"><span class="heart"></span> Favorito</button>
        <button type="button" id="addBtn" class="btn btn--primary">Agregar al pedido</button>
        <a class="btn btn--ghost" href="paginaPrincipalCliente.html" th:href="@{/static}">Volver al menú</a>
        <a class="btn btn--ghost" href="pedido.html" th:href="@{/templates/pedido}">Ir al pedido</a>
      </div>
    </form>

    <div class="summary">
      <strong>Resumen rápido</strong>
      <div class="row" id="quickTags"></div>
    </div>
  </section>
</main>

<script>
(function(){
  const form = document.getElementById('burgerForm');
  const quickTags = document.getElementById('quickTags');
  const favBtn = document.getElementById('favBtn');
  const addBtn = document.getElementById('addBtn');

  let isFav = false;
  favBtn.addEventListener('click', () => {
    isFav = !isFav;
    favBtn.classList.toggle('active', isFav);
  });

  function readSelections(){
    const allChecks = Array.from(form.querySelectorAll('input[type=checkbox]:checked')).map(c=>c.value);
    const extras = allChecks.filter(v => ['Bacon','Tomate','Lechuga','Cebolla','Pepinillos'].includes(v));
    const acomp  = allChecks.filter(v => ['Papas','Bebida'].includes(v));
    return {
      tipo: 'Burger',
      pan: form.pan.value,
      proteina: form.proteina.value,
      cantidadCarnes: form.cant.value,
      queso: form.queso.value,
      extras, acomp,
      favorito: isFav
    };
  }
  function renderTags(){
    const d = readSelections();
    const parts = [ d.pan, d.proteina, d.cantidadCarnes+'x', d.queso,
      ...d.extras.map(x=>'Extra: '+x), ...d.acomp.map(x=>'Ac: '+x) ];
    quickTags.innerHTML = parts.map(t => '<span class="tag">'+t+'</span>').join('');
  }
  form.addEventListener('change', renderTags);
  renderTags();

  addBtn.addEventListener('click', () => {
    const d = readSelections();
    const cart = JSON.parse(localStorage.getItem('cart')||'[]');
    cart.push(d);
    localStorage.setItem('cart', JSON.stringify(cart));
    if(d.favorito){
      const favs = JSON.parse(localStorage.getItem('favorites')||'[]');
      favs.push(d);
      localStorage.setItem('favorites', JSON.stringify(favs));
    }
    alert('Burger agregada al pedido.');
  });
})();
</script>
</body>
</html>
